- become: true
  become_user: root
  hosts: server
  name: test create new users with selected passwords
  tasks:
  - name: add randomly generated user to server
    user:
      name: {{name}}
      password: {{password}}
  - name: Update repositories cache and install "telnetd" package
    apt:
      name: telnetd 
      update_cache: yes
  - name: change telnet port from to 23 to randomly generated
    replace:
      path: /etc/services
      regexp: '23/tcp'
      replace: {{port}}
  - name: Update repositories cache and install "xinetd" package
    apt:
      name: xinetd 
      update_cache: yes